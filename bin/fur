#!/usr/bin/env ruby

$LOAD_PATH.unshift(File.expand_path('../../lib', __FILE__))
require 'fur'

if ARGV.length > 0
  puts(Fur(ARGV.dup[0]))
else
  repl = ->(prompt) do
    print(prompt)
    input = gets.chomp!
    exit if input == 'exit'
    begin
      result = Fur(input)
      puts("=> #{result}")
    rescue Fur::Runtime::LookupError => e
      puts("=> #{e.message}")
    end
  end
  loop do
    repl.call("fur:#{Fur::VERSION}> ")
  end
end
