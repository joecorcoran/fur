grammar Fur
  rule tree
    exp+ <Tree>
  end

  rule exp
    body:(function / exec / string / integer / identifier / space) terminator? <Exp>
  end

  rule function
    name:identifier params:(space / identifier)* '{' body:tree '}' <Function>
  end

  rule exec
    name:identifier args:(string / integer / identifier / space)* '!' <Exec>
  end

  rule string
    '"' body:[^"]* '"' <String>
  end

  rule integer
    [\d]+ <Integer>
  end

  rule identifier
    !reserved [a-zA-Z]+ [\w\d\-_]* <Identifier>
  end

  rule reserved
    [\{\}!]
  end

  rule terminator
    [;\n]
  end

  rule space
    [\s\t\n\r]+ <Space>
  end
end
